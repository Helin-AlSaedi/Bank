(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[309],{1430:(t,e,n)=>{"use strict";n.d(e,{DY:()=>o,Lx:()=>s,r1:()=>r,rW:()=>c});let a="http://localhost:3001";async function s(t,e){let n=await fetch("".concat(a,"/sessions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:e})});if(!n.ok){alert((await n.json()).error||"Login failed!");return}return await n.json()}async function o(t,e){let n=await fetch("".concat(a,"/users"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:e})});return await n.json()}async function r(t,e){let n=await fetch("".concat(a,"/me/accounts"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,token:e})});return(await n.json()).amount}async function c(t,e,n){let s=await fetch("".concat(a,"/me/accounts/transactions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,token:e,amount:n})});return await s.json()}},3284:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var a=n(7876),s=n(4232),o=n(9099),r=n(1430),c=n(9446);function i(){let t=(0,o.useRouter)(),{user:e,loading:n}=(0,c.J)(),[i,l]=(0,s.useState)(null),[u,d]=(0,s.useState)("");async function h(t,e){l(await (0,r.r1)(t,e))}async function p(t){t.preventDefault(),await (0,r.rW)(e.userId,e.otp,Number(u)),d(""),h(e.userId,e.otp)}return((0,s.useEffect)(()=>{n||e||t.push("/"),e&&h(e.userId,e.otp)},[e,n]),n)?(0,a.jsx)("p",{children:"Laddar..."}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-100",children:(0,a.jsxs)("div",{className:"container mx-auto py-10 text-center",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-800",children:"Konto"}),(0,a.jsxs)("p",{className:"text-xl mt-4 text-gray-800",children:["Saldo: ",null!==i?"".concat(i," kr"):"Laddar..."]}),(0,a.jsxs)("div",{className:"max-w-md mx-auto bg-white p-6 rounded-lg shadow-lg mt-6",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"S\xe4tt in pengar"}),(0,a.jsxs)("form",{onSubmit:p,className:"mt-4",children:[(0,a.jsx)("input",{type:"number",value:u,onChange:t=>d(t.target.value),className:"w-full px-4 py-2 border rounded-md text-gray-800",required:!0}),(0,a.jsx)("button",{className:"mt-6 w-full bg-green-900 text-white py-2 rounded-md hover:bg-green-700",children:"S\xe4tt in"})]})]})]})})}},6350:(t,e,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/account",function(){return n(3284)}])},9099:(t,e,n)=>{t.exports=n(8253)}},t=>{var e=e=>t(t.s=e);t.O(0,[636,593,792],()=>e(6350)),_N_E=t.O()}]);